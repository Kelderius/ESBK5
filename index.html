<!DOCTYPE html>
<html lang="ru">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
 <title>Exchange Simulator</title>
 <style>
  body {
   font-family: Arial, sans-serif;
   background-image: url("https://i.ibb.co/Nb8wWNh/IMG-6779.jpg");
   background-size: cover;
   display: flex;
   justify-content: center;
   align-items: center;
   height: 100vh;
   margin: 0;
   overflow: hidden;
  }
  .container {
   text-align: center;
   background: white;
   padding: 20px;
   border-radius: 5px;
   box-shadow: 0 0 10px rgba(0,0,0,0.1);
   width: 73%;
  }
  h1 {
   font-size: 2em;
   margin: 0;
  }
  .price {
   font-size: 1.5em;
   color: #333;
  }
  .controls {
   display: flex;
   justify-content: space-between;
   margin-top: 15px;
  }
  button {
   padding: 30px;
   cursor: pointer;
   width: 130px; 
  }
  .status {
   margin-top: 30px;
  }
  .menu-button {
   position: absolute; 
   top: 20px;
   left: 20px;
   width: 50px;
   height: 50px; 
   text-align: center; 
   border: none;
   border-radius: 50%;
   color: white;
   text-decoration: none;
   line-height: 50px; 
   background-image: url("https://w7.pngwing.com/pngs/14/584/png-transparent-arrow-back-before-circle-direction-left-leftside-navigation-next-to-small-arrow-inside-a-circle-icon.png");
   background-size: cover;
  }
 </style>
</head>
<body>
 <a href="https://kelderius.github.io/Main-Menu5/" class="menu-button"></a>
 <div class="container">
  <h1 id="marketHeader">–ë–∏—Ä–∂–∞ üë®‚Äçüíª</h1>
  <div class="price" id="price">11.91‚ÇΩ</div>
  <div class="controls">
   <div>
  <button id="buyBtn">–ö—É–ø–∏—Ç—å –∞–∫—Ü–∏—é</button>
  <button id="buy100Btn" style="margin-top: 10px;">–ö—É–ø–∏—Ç—å 100 –∞–∫—Ü–∏–π</button>
  <button id="buyAllBtn" style="margin-top: 10px;">–ö—É–ø–∏—Ç—å –º–∞–∫—Å–∏–º—É–º</button>
   </div>
   <div>
  <button id="sellBtn">–ü—Ä–æ–¥–∞—Ç—å –∞–∫—Ü–∏—é</button>
  <button id="sell100Btn" style="margin-top: 10px;">–ü—Ä–æ–¥–∞—Ç—å 100 –∞–∫—Ü–∏–π</button>
  <button id="sellAllBtn" style="margin-top: 10px;">–ü—Ä–æ–¥–∞—Ç—å –º–∞–∫—Å–∏–º—É–º</button>
   </div>
  </div>
  <div class="status" id="status">
   –£ –≤–∞—Å –∞–∫—Ü–∏–π: <span id="shares">0</span><br>
   –ë–∞–ª–∞–Ω—Å: <span id="balance">100.00‚ÇΩ</span>
  </div>
 </div>

 <script>
  let currentPrice = 11.91;
  const minPrice = 0.06;
  let shares = 0;
  let balance = 100.00;
  let previousPrice = currentPrice;

  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
  function loadData() {
   const savedShares = localStorage.getItem('shares');
   const savedBalance = localStorage.getItem('balance');
   const savedPrice = localStorage.getItem('currentPrice');
   if (savedShares !== null) {
  shares = parseInt(savedShares, 10);
   }
   if (savedBalance !== null) {
  balance = parseFloat(savedBalance);
   }
   if (savedPrice !== null) {
  currentPrice = parseFloat(savedPrice);
   }
   updateStatus();
   updatePriceDisplay();
  }

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage
  function saveData() {
   localStorage.setItem('shares', shares);
   localStorage.setItem('balance', balance);
   localStorage.setItem('currentPrice', currentPrice);
  }

  function updatePrice() {
   const change = (Math.random() * 10 - 5).toFixed(6); // –î–∏–∞–ø–∞–∑–æ–Ω –æ—Ç -5,00 –¥–æ 5,00
   currentPrice += parseFloat(change);
   if (currentPrice < minPrice) {
  currentPrice = minPrice;
   }
   updatePriceDisplay();
   updateMarketHeader();
   previousPrice = currentPrice;
   saveData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
  }

  function updatePriceDisplay() {
   document.getElementById('price').innerText = currentPrice.toFixed(2) + '‚ÇΩ';
  }

  function updateMarketHeader() {
   const header = document.getElementById('marketHeader');
   if (currentPrice > previousPrice) {
  header.innerText = '–ë–∏—Ä–∂–∞ üìà';
   } else if (currentPrice < previousPrice) {
  header.innerText = '–ë–∏—Ä–∂–∞ üìâ';
   } else {
  header.innerText = '–ë–∏—Ä–∂–∞ üë®‚Äçüíª';
   }
  }

  function updateStatus() {
   document.getElementById('shares').innerText = shares;
   document.getElementById('balance').innerText = balance.toFixed(2) + '‚ÇΩ';
   saveData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
  }

  document.getElementById('buyBtn').onclick = function() {
   if (balance >= currentPrice) {
  shares++;
  balance -= currentPrice;
  updateStatus();
   } else {
  alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∞–∫—Ü–∏–∏.');
   }
  };

  document.getElementById('sellBtn').onclick = function() {
   if (shares > 0) {
  shares--;
  balance += currentPrice;
  updateStatus();
   } else {
  alert('–£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ü–∏–π –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏.');
   }
  };

  document.getElementById('buy100Btn').onclick = function() {
   if (balance >= currentPrice * 100) {
  shares += 100;
  balance -= currentPrice * 100;
  updateStatus();
   } else {
  alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ 100 –∞–∫—Ü–∏–π.');
   }
  };

  document.getElementById('sell100Btn').onclick = function() {
   if (shares >= 100) {
  shares -= 100;
  balance += currentPrice * 100;
  updateStatus();
   } else {
  alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∞–∫—Ü–∏–π –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏.');
   }
  };
  
  document.getElementById('buyAllBtn').onclick = function() {
   const maxShares = Math.floor(balance / currentPrice);
   if (maxShares > 0) {
  shares += maxShares;
  balance -= currentPrice * maxShares;
  updateStatus();
   } else {
  alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∞–∫—Ü–∏–π.');
   }
  };

  document.getElementById('sellAllBtn').onclick = function() {
   if (shares > 0) {
  balance += currentPrice * shares;
  shares = 0;
  updateStatus();
   } else {
  alert('–£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ü–∏–π –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏.');
   }
  };

  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  window.onload = function() {
   loadData();
   setInterval(updatePrice, 10000);
  };
 </script>
</body>
</html>